{% extends 'accueil.html' %}

{% block content %}



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


<br>
<br>
<br>
<br>
<!-- MultiStep Form -->
<div class="container-fluid" id="grad1">
    <div class="row justify-content-center mt-0">
        <div class="col-11 col-sm-9 col-md-7 col-lg-6 text-center p-0 mt-3 mb-2">
            <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                <h2><strong>Formulaire de localisation</strong></h2>
                <p>Remplissez tous les champs du formulaire pour passer à l'étape suivante</p>
                <div class="row">
                    <div class="col-md-12 mx-0">
                        <form id="msform" class="myForm" action="{% url 'ajouter_contribuable' contribuable.id %}" method="POST">
                            {% csrf_token %}
                            <!-- progressbar -->
                            <ul id="progressbar">
                                <li class="active" id="account"><strong>Identité</strong></li>
                                <li id="personal"><strong>Indication complémentaire</strong></li>
                                <li id="payment"><strong>Localisation</strong></li>
                                <li id="confirm"><strong>Terminé</strong></li>
                            </ul> <!-- fieldsets -->
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title">Identité du contribuable</h2>
                                    <br>
                                    <label for="">Le contribuable est un:
                                    
                                            
                                            <label for="particulier">Particulier<input type="radio" id="particulier" name="identity" value="Particulier"></label> 
                                            <label for=""></label>
                                            <label for=""></label>
                                            <label for=""></label>
                                            <label for=""></label>
                                            
                                            <label for="professionel">Professionel<input type="radio" id="professionel" name="identity"  value="Professionel"></label> 
                                        
                                    </label>
                                     
                                    <div class="row">
                                        <div class="col-6"> <label class="pay">Nom</label> <input type="text" name="first_name" placeholder="" autocomplete="off"/> </div>
                                        <div class="col-6"> <label class="pay">Prénoms</label> <input type="text" name="last_name" placeholder="" autocomplete="off"/> </div>
                                    </div> 
                                        <input type="text" name="title" placeholder="Titre" />
                                        
                                        <input type="text" name="nif" placeholder="NIF" />
                                        <input type="text" name="denomination" placeholder="Dénomination" />
                                </div> <input type="button" name=".next" class="next action-button" value="Suivant" />
                            </fieldset>
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title">Indications complémentaires</h2>
                                    
                                    
                                    <label for="">Le contribuable est propriétaire du local indiqué:
                                    
                                        <label for=""><h6>Oui</h6> <input type="radio" id="oui" name="is_owner" value="Oui"></label>
                                        <label for="">  </label>
                                        <label for="">  </label>
                                        <label for="">  </label>
                                    
                                        <label for=""><h6>Non</h6> <input type="radio" id="non" name="is_owner"  value="Non"></label>
                                         
                                    </label>
                               
                                    <input type="text" name="quarter" placeholder="Quartier" />
                                    <input type="text" name="rue" placeholder="Rue" />
                                    <input type="text" name="door_number" placeholder="N° Porte" />
                                    <input type="text" name="parcel_number" placeholder="N° Parcelle" />
                                    <input type="text" name="lot_number" placeholder="N° ilot" />
                                    <input type="text" name="land_title_number" placeholder="N° Titre Foncier" />
                                    <input type="text" name="tel" placeholder="N° Téléphone"/>
                                </div> <input type="button" name="previous" class="previous action-button-previous" value="Retour" /> <input type="button" name="next" class="next action-button" value="Suivant" />
                            </fieldset>
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title">Information sur la Localisation</h2>
                                    <input type="text" name="geo_situation" placeholder="Situation géographique" />
                                    <input type="text" name="longitude" placeholder="Longitude" readonly />
                                    <input type="text" name="latitude" placeholder="Latitude" readonly/>
                                    
                                </div> <input type="button" name="previous" class="previous action-button-previous" value="Retour" /> <input type="submit" name="submit" class="next action-button" value="Valider"></input>
                            </fieldset>
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title text-center">Success !</h2> <br><br>
                                    <div class="row justify-content-center">
                                        <div class="col-3"> <img src="https://img.icons8.com/color/96/000000/ok--v2.png" class="fit-image"> </div>
                                    </div> <br><br>
                                    <div class="row justify-content-center">
                                        <div class="col-7 text-center">
                                            <h5>En attente de téléchargement</h5>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    var current_fs, next_fs, previous_fs; //fieldsets
    var opacity;

    $(".next").click(function () {

        current_fs = $(this).parent();
        next_fs = $(this).parent().next();

        //Add Class Active
        $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

        //show the next fieldset
        next_fs.show();
        //hide the current fieldset with style
        current_fs.animate({ opacity: 0 }, {
            step: function (now) {
                // for making fielset appear animation
                opacity = 1 - now;

                current_fs.css({
                    'display': 'none',
                    'position': 'relative'
                });
                next_fs.css({ 'opacity': opacity });
            },
            duration: 600
        });
    });

    $(".previous").click(function () {

        current_fs = $(this).parent();
        previous_fs = $(this).parent().prev();

        //Remove class active
        $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

        //show the previous fieldset
        previous_fs.show();

        //hide the current fieldset with style
        current_fs.animate({ opacity: 0 }, {
            step: function (now) {
                // for making fielset appear animation
                opacity = 1 - now;

                current_fs.css({
                    'display': 'none',
                    'position': 'relative'
                });
                previous_fs.css({ 'opacity': opacity });
            },
            duration: 600
        });
    });

    $('.radio-group .radio').click(function () {
        $(this).parent().find('.radio').removeClass('selected');
        $(this).addClass('selected');
    });

    $(".submit").click(function () {
        return false;
    });

    

</script>


<script>
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, showError);
    }
  }
  function showPosition(position) {
    document.querySelector('.myForm input[name="latitude"]').value =
      position.coords.latitude;
    document.querySelector('.myForm input[name="longitude"]').value =
      position.coords.longitude;
  }
  function showError(error) {
    switch (error.code) {
      case error.PERMISSION_DENIED:
        alert(
          "You Must Allow The Request For Geolocation To Fill Out The Form"
        );
        location.reload();
        break;
    }
  }

  window.onload = getLocation();
</script>




{% endblock %}
